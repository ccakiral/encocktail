<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encocktail - Kokteyl Bar</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <link rel="stylesheet" href="https://cdn.rawgit.com/noelboss/featherlight/1.7.13/release/featherlight.min.css">
    <link rel="stylesheet" href="https://cdn.rawgit.com/noelboss/featherlight/1.7.13/release/featherlight.gallery.min.css">
</head>
<body>

    <header class="hero-section">
        <div class="overlay"></div>
        <div class="hero-content">
            <h1>ENCOCKTAIL</h1>
            <p>Kokteyl Bar / Kokteyl Atölye</p>
            
            <div>
                <a href="#paketler" class="cta-button">Hizmetleri Gör</a>
                <a href="#basvuru" class="cta-button cta-secondary open-modal" data-hizmet="BAR">Teklif Alın</a>
            </div>
        </div>
    </header>

    <section class="section-why-us">
        <h2>Fark Yaratan Detaylar</h2>
        <div class="why-us-grid">
            <div class="why-us-item">
                <i class="fas fa-cocktail"></i>
                <h3>Kişiselleştirilmiş Kokteyl Deneyimi</h3>
                <p>Mevsimlik ve taze malzemelerle hazırlanan, etkinliğinizin konseptine özel imza kokteyller.</p>
            </div>
            <div class="why-us-item">
                <i class="fas fa-trophy"></i>
                <h3>Deneyimli ve Lisanslı Bar Ekibi</h3>
                <p>Uluslararası standartlarda eğitimli, güler yüzlü ve profesyonel barmen ekibi.</p>
            </div>
            <div class="why-us-item">
                <i class="fas fa-gem"></i>
                <h3>Premium Mobil Bar Kurulumu</h3>
                <p>Etkinlik alanınıza estetik katacak, özel tasarım ve tam donanımlı mobil bar setleri.</p>
            </div>
        </div>
    </section>

    <section id="paketler" class="section-paketler">
        <h2>Etkinlik Paketlerimiz</h2>
        <div class="paket-container">
            
            <a href="#kokteyller-bar" class="paket-link" data-paket="bar">
                <div class="paket-card seckin">
                    <div class="paket-header">
                        <h3><i class="fas fa-medal"></i> Kokteyl Bar Hizmeti</h3>
                        <p class="subtitle">VIP DAVETLER, BUTİK DÜĞÜNLER & LANSMAN ETKİNLİKLERİ</p>
                    </div>
                    <ul>
                        <li>**Her Şey Dahil (All-Inclusive)** Premium Bar Kurulumu</li>
                        <li>150 Misafire kadar</li>
                        <li>Profesyonel barmen hizmeti</li>
                        <li>Exclusive kokteyl menüsü (**4 kokteyl**)</li>
                        <li>Tüm bar ekipmanları, dekor ve premium aksesuarlar</li>
                        <li>Özelleştirilebilir içecek menüsü tabelası</li>
                        <li>Kurulum ve toplama</li>
                        <li>Etkinliğe özel alışveriş listesi danışmanlığı</li>
                        <li>Garnitür istasyonu dahildir</li>
                    </ul>
                    <p class="minimum-info">Tüm içerikler ve süre her zaman **kişiselleştirilebilir**.</p>
                </div>
            </a>

            <a href="#atolyeler" class="paket-link" data-paket="atolye">
                <div class="paket-card atolye">
                    <div class="paket-header">
                        <h3><i class="fas fa-flask"></i> Kokteyl Atölyesi</h3>
                        <p class="subtitle">KURUMSAL EĞLENCELER, DOĞUM GÜNÜ & ARKADAŞ BULUŞMALARI</p>
                    </div>
                    <ul>
                        <li>**Periyodik Açık Atölyeler:** Belirli tarihlerde düzenlediğimiz etkinliklere katılım.</li>
                        <li>**Özel Mekan Atölyeleri:** Size özel bir tarih, mekan ve konsepte göre atölye.</li>
                        <li>Kokteyl yapımının sırları, teknikleri ve hikayeleri.</li>
                        <li>Katılımcıların kendi imzalarını taşıyan kokteylleri hazırlaması.</li>
                        <li>Tüm premium malzeme ve ekipmanlar tarafımızdan temin edilir.</li>
                        <li>Bireysel veya 10-50 kişilik gruplara özel tasarlanabilir.</li>
                        <li>Etkinliğinize özel temalar (Tekila, Viski, Aperatifler vb.) belirlenebilir.</li>
                    </ul>
                    <p class="minimum-info">Bu paket, tamamen size özel olarak **kişiselleştirilebilir**.</p>
                </div>
            </a>
            
        </div>
    </section>

    <section id="kokteyller-bar" class="section-kokteyller">
        <div class="menu-title-container">
            <h2 class="kokteyl-baslik">Kokteyl Bar Hizmeti Menüsü</h2>
            <div class="menu-header-controls">
                <a href="#basvuru" class="cta-button cta-small open-modal" data-hizmet="BAR">Teklif Alın</a> 
                <a href="#paketler" class="back-to-packages">Paketlere Geri Dön</a>
            </div>
        </div>
        <p class="menu-intro">Bar hizmetimiz için seçebileceğiniz özel kokteyl menüsü seçenekleri. (Tüm kokteyllerimiz burada listelenmektedir.)</p>
        <div class="menu-grid">
            </div>
    </section>
    
    <section id="atolyeler" class="section-atolyeler">
        <div class="menu-title-container">
            <h2 class="kokteyl-baslik">Kokteyl Atölyesi Detayları</h2>
            <div class="menu-header-controls">
                <a href="#basvuru" class="cta-button cta-small open-modal" data-hizmet="ATOLYE">Bilgi ve Teklif Alın</a>
                <a href="#paketler" class="back-to-packages">Paketlere Geri Dön</a>
            </div>
        </div>
        <div class="atolye-detay">
            
            <div class="atolye-item">
                <h3><i class="fas fa-calendar-alt"></i> Periyodik Açık Atölyeler</h3>
                <p>Belirli tarihlerde, farklı temalarla herkesin katılımına açık olarak düzenlediğimiz atölyelerdir. Hem bireysel hem de küçük gruplar için harika bir deneyim sunar. Güncel program ve yer bilgisi için bizimle iletişime geçebilirsiniz.</p>
                
            </div>
            
            <div class="atolye-item">
                <h3><i class="fas fa-map-marker-alt"></i> Size Özel Mekan Atölyeleri</h3>
                <p>Düğün öncesi eğlencesi, kurumsal ekip etkinlikleri, özel kutlamalar veya doğum günleri için mükemmel bir seçenek. Sizin belirlediğiniz mekanda, konsepte ve katılımcı sayısına göre tamamen **kişiselleştirilmiş** bir atölye içeriği hazırlıyoruz. Kokteyl kültürünü eğlenceli ve uygulamalı bir şekilde keşfedin!</p>
            </div>
            
            <p class="atolye-uyari">Paket içeriği, kokteyl reçeteleri ve süre gibi tüm detaylar isteğinize göre özelleştirilebilir.</p>
        </div>
    </section>


    <section id="basvuru" class="modal-form-overlay">
        <div class="modal-form-container">
            <a href="#" class="close-modal">&times;</a>
            <h2 id="modal-title">Bar Hizmeti Teklif Formu</h2>
            <p class="form-intro">Etkinliğiniz için detaylı teklif almak üzere formu doldurunuz. En kısa sürede size ulaşacağız.</p>
            
            <form name="contact" class="contact-form" method="POST">
                
                <input type="hidden" name="Hizmet_Turu" id="hizmet_turu" value="BAR HİZMETİ">

                <div class="form-group">
                    <label for="adsoyad">Ad Soyad *</label>
                    <input type="text" id="adsoyad" name="Ad_Soyad" required>
                </div>
                <div class="form-group">
                    <label for="telefon">Telefon *</label>
                    <input type="tel" id="telefon" name="Telefon" required>
                </div>
                <div class="form-group">
                    <label for="email">E-posta *</label>
                    <input type="email" id="email" name="Email" required>
                </div>
                <div class="form-group">
                    <label for="misafir">Misafir Sayısı *</label>
                    <input type="number" id="misafir" name="Misafir_Sayisi" min="1" required>
                </div>
                <div class="form-group full-width">
                    <label for="tarih">Etkinlik Tarihi *</label>
                    <input type="date" id="tarih" name="Etkinlik_Tarihi" required>
                </div>
                <div class="form-group full-width">
                    <label for="lokasyon">Etkinlik Lokasyonu (Şehir/Mekan) *</label>
                    <input type="text" id="lokasyon" name="Etkinlik_Lokasyonu" required>
                </div>

                <div class="form-group full-width">
                    <label for="paketSecimi">Paket Seçimi *</label>
                    <select id="paketSecimi" name="Paket_Secimi" required>
                        <option value="" disabled selected>Lütfen bir paket seçin</option>
                        <option value="keyifli">Keyifli Paket (4 Kokteyl)</option>
                        <option value="ozel">Özel Paket (5 Kokteyl)</option>
                        <option value="seckin">Seçkin Paket (6 Kokteyl)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="servisSaati">Servis Saati (Minimum 3 saat) *</label>
                    <input type="number" id="servisSaati" name="Servis_Saati" min="3" value="3" required>
                </div>
                <div class="form-group">
                    <label for="garsonSayisi">Garson Sayısı (Kokteyl/Atölye Harici)</label>
                    <input type="number" id="garsonSayisi" name="Garson_Sayisi" min="0" value="0">
                </div>

                <div class="form-group full-width kokteyl-secim-container">
                    <label>Kokteyl Seçimi (Paketinize uygun adette seçiniz)</label>
                    <div class="checkbox-list" id="kokteylSecim">
                        </div>
                </div>
                
                <div class="form-group full-width">
                    <label for="not">Ekstra Notlar / Detaylar (Konsept, Kokteyl tercihleri vb.)</label>
                    <textarea id="not" name="Ekstra_Notlar" rows="4"></textarea>
                </div>
                
                <button type="submit" class="cta-button">Teklif Al</button>
                <div id="loader" style="display: none;">Gönderiliyor...</div>
            </form>
        </div>
    </section>


    <footer>
        <p>&copy; 2025 ENcocktail. Tüm Hakları Saklıdır.</p>
        <div class="footer-contact">
            <p>
                <i class="fas fa-envelope"></i> <a href="mailto:encocktail@gmail.com" class="footer-link">encocktail@gmail.com</a>
            </p>
            <p>
                <i class="fab fa-instagram"></i> <a href="https://www.instagram.com/encocktail/" target="_blank" class="footer-link">@encocktail</a>
            </p>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.rawgit.com/noelboss/featherlight/1.7.13/release/featherlight.min.js"></script>
    <script src="https://cdn.rawgit.com/noelboss/featherlight/1.7.13/release/featherlight.gallery.min.js"></script>
    <script src="script.js"></script>
    
    <script>
        // Pakete göre kaç çeşit kokteyl seçilebileceği (ESKİ YAPIDAN KORUNDU)
        const paketLimitleri = {
            'keyifli': { min: 4, max: 4, maxExtra: 0 },
            'ozel': { min: 5, max: 5, maxExtra: 0 },
            'seckin': { min: 6, max: 6, maxExtra: 0 }
        };

        // Galeri yükleme fonksiyonu (Önceki Adımlardan Korundu)
        function yukleVeGaleriBaslat() {
            const menuConfigs = [
                { id: '#kokteyller-bar', galleryName: 'bar-tumu' } 
            ];
            
            // FORM İÇİNDEKİ KOKTEYL SEÇİMİNİ DOLDURMAK İÇİN YENİ BİR BAŞLATMA
            const $kokteylSecimDiv = $('#kokteylSecim');
            const $paketSecimi = $('#paketSecimi');

            $.getJSON('kokteyller.json')
                .done(function(data) {
                    
                    const allCocktailsForGallery = [].concat(
                        data['keyifli-menu'] || [], 
                        data['ozel-menu'] || [], 
                        data['seckin-menu'] || []
                    );
                    
                    // 1. KOKTEYLLERİ MODAL İÇİNE DOLDUR (TEKRARSIZ LİSTE)
                    let kokteylSecimHTML = '';
                    const uniqueCocktailTitles = new Set();
                    
                    allCocktailsForGallery.forEach(cocktail => {
                        if (!uniqueCocktailTitles.has(cocktail.ad)) {
                            uniqueCocktailTitles.add(cocktail.ad);
                            kokteylSecimHTML += `
                                <label>
                                    <input type="checkbox" name="Kokteyl_Secimi" value="${cocktail.ad}">
                                    ${cocktail.ad}
                                </label>
                            `;
                        }
                    });
                    $kokteylSecimDiv.html(kokteylSecimHTML);
                    
                    // 2. PAKET SEÇİMİ VE KOKTEYL KONTROLÜ
                    $paketSecimi.on('change', function() {
                        const paketValue = $(this).val();
                        if (paketValue) {
                            $('.kokteyl-secim-container').show();
                        }
                    }).trigger('change'); 

                    // 3. FORM GÖNDERİMİNDE KONTROL
                    $('.contact-form').on('submit', function(e) {
                        const paketValue = $paketSecimi.val();
                        if (!paketValue) return;

                        const paketInfo = paketLimitleri[paketValue];
                        const totalSelectedMain = $('input[name="Kokteyl_Secimi"]:checked').length;
                        const maxAllowedMain = paketInfo.max;

                        if (totalSelectedMain < maxAllowedMain) {
                            const remaining = maxAllowedMain - totalSelectedMain;
                            const message = `Paketiniz için ${maxAllowedMain} adet kokteyl seçme hakkınız varken ${totalSelectedMain} adet seçtiniz. Kalan ${remaining} hakkınızı kullanmak istemediğinize emin misiniz?`;
                            
                            if (!confirm(message)) {
                                e.preventDefault();
                                return;
                            }
                        }
                    });
                    
                    // 4. GALERİYİ VE MENU GÖRÜNÜMÜNÜ DOLDUR (ESKİ FONKSİYON)
                    menuConfigs.forEach(config => {
                        const $container = $(config.id).find('.menu-grid'); 
                        $container.empty(); 
                        
                        const cocktails = allCocktailsForGallery; 
                        let htmlContent = '';
                        const uniqueGalleryTitles = new Set(); // Tekrarlanan kokteylleri galeride de engelle

                        cocktails.forEach(cocktail => {
                            if (!uniqueGalleryTitles.has(cocktail.ad)) {
                                uniqueGalleryTitles.add(cocktail.ad);
                                 // Kokteyl HTML yapısı
                                htmlContent += `
                                    <div class="cocktail-item">
                                        <a href="${cocktail.gorsel_buyuk}" 
                                        class="lightbox-trigger" 
                                        data-featherlight="image" 
                                        data-title="${cocktail.ad}" 
                                        data-description="${cocktail.aciklama.replace(/\n/g, '<br>')}" 
                                        data-featherlight-gallery="${config.galleryName}">
                                            <img src="${cocktail.gorsel_thumb}" alt="${cocktail.ad}">
                                        </a>
                                        <h4>${cocktail.ad}</h4>
                                        <p>${cocktail.aciklama.replace(/\n/g, '<br>')}</p>
                                    </div>
                                `;
                            }
                        });
                        $container.html(htmlContent); 
                    });

                    menuConfigs.forEach(menu => {
                        const $links = $(menu.id).find('a.lightbox-trigger');
                        $links.attr('data-featherlight-filter', 'a[data-featherlight-gallery=\"' + menu.galleryName + '\"]');
                        $links.featherlightGallery({
                            previousIcon: '&#9664;',     
                            nextIcon: '&#9654;',         
                            closeIcon: 'X',              
                            galleryFadeIn: 300,
                            galleryFadeOut: 300
                        });
                    });

                })
                .fail(function() {
                    console.error("Hata: kokteyller.json dosyası yüklenemedi veya hatalı.");
                });
        }

        // --- Sayfa Yüklendiğinde Başlat ---
        $(document).ready(function() {
            yukleVeGaleriBaslat(); 
        });
    </script>
</body>
</html>